{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AZIZ\\\\Desktop\\\\gen_meme\\\\client\\\\src\\\\components\\\\MemeGenerator.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport axios from 'axios';\nimport html2canvas from 'html2canvas';\nimport toast from 'react-hot-toast';\nimport './component.css';\nimport InteractifGen from './InteractifGen';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MemeGenerator = () => {\n  _s();\n  const [selectedImages, setSelectedImages] = useState([]);\n  const [imageUrl, setImageUrl] = useState('');\n  const [cloudinaryId, setCloudinaryId] = useState('');\n  const [topText, setTopText] = useState('');\n  const [bottomText, setBottomText] = useState('');\n  const [title, setTitle] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [preview, setPreview] = useState(null);\n  const [displayMode, setDisplayMode] = useState('single');\n  const [customTexts, setCustomTexts] = useState([]);\n  const [textEditMode, setTextEditMode] = useState(false);\n  const [activeImageIndex, setActiveImageIndex] = useState(0);\n  const [textColor, setTextColor] = useState('#ffffff');\n  const [textBgColor, setTextBgColor] = useState('#000000');\n  const [textBgOpacity, setTextBgOpacity] = useState(0.7);\n  const [editingText, setEditingText] = useState('');\n  const [showCustomEditor, setShowCustomEditor] = useState(false);\n  const memeRef = useRef(null);\n  const canvasRef = useRef(null);\n  function hexToRgba(hex, opacity) {\n    const r = parseInt(hex.slice(1, 3), 16);\n    const g = parseInt(hex.slice(3, 5), 16);\n    const b = parseInt(hex.slice(5, 7), 16);\n    return `rgba(${r}, ${g}, ${b}, ${opacity})`;\n  }\n  const displayModes = {\n    single: {\n      name: 'Image unique',\n      maxImages: 1\n    },\n    horizontal: {\n      name: 'Horizontal (2)',\n      maxImages: 2\n    },\n    vertical: {\n      name: 'Vertical (2)',\n      maxImages: 2\n    },\n    grid2x2: {\n      name: 'Grille 2x2',\n      maxImages: 4\n    }\n  };\n  const handleImageUpload = async event => {\n    const files = Array.from(event.target.files);\n    const maxImages = displayModes[displayMode].maxImages;\n    if (selectedImages.length + files.length > maxImages) {\n      toast.error(`Maximum ${maxImages} image(s) pour ce mode d'affichage`);\n      return;\n    }\n    const validFiles = files.filter(file => {\n      if (file.size > 5 * 1024 * 1024) {\n        toast.error(`${file.name} est trop volumineux (max 5MB)`);\n        return false;\n      }\n      return true;\n    });\n    const newImages = validFiles.map(file => ({\n      file,\n      preview: URL.createObjectURL(file),\n      id: Date.now() + Math.random()\n    }));\n    setSelectedImages(prev => [...prev, ...newImages]);\n    if (validFiles.length > 0) {\n      setIsUploading(true);\n      setTimeout(() => setIsUploading(false), 1000);\n    }\n  };\n  const removeImage = imageId => {\n    setSelectedImages(prev => {\n      const updated = prev.filter(img => img.id !== imageId);\n      // Libérer l'URL de l'image supprimée\n      const removedImage = prev.find(img => img.id === imageId);\n      if (removedImage) {\n        URL.revokeObjectURL(removedImage.preview);\n      }\n      return updated;\n    });\n\n    // Nettoyer les textes personnalisés associés à cette image\n    setCustomTexts(prev => prev.filter(text => text.imageIndex !== imageId));\n  };\n  const handleCanvasClick = event => {\n    if (!textEditMode || selectedImages.length === 0) return;\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const img = event.target;\n    const rect = img.getBoundingClientRect();\n    const x = (event.clientX - rect.left) / rect.width * img.naturalWidth;\n    const y = (event.clientY - rect.top) / rect.height * img.naturalHeight;\n    const newText = {\n      id: Date.now(),\n      text: 'Nouveau texte',\n      x: x,\n      y: y,\n      imageIndex: activeImageIndex,\n      color: textColor,\n      bgColor: textBgColor,\n      bgOpacity: textBgOpacity,\n      isEditing: true\n    };\n    setCustomTexts(prev => [...prev, newText]);\n  };\n  const updateCustomText = (textId, newText) => {\n    setCustomTexts(prev => prev.map(t => t.id === textId ? {\n      ...t,\n      text: newText,\n      isEditing: false\n    } : t));\n  };\n  const removeCustomText = textId => {\n    setCustomTexts(prev => prev.filter(t => t.id !== textId));\n  };\n  const generateMemeImage = async () => {\n    if (selectedImages.length === 0) return null;\n    return new Promise((resolve, reject) => {\n      const canvas = document.createElement(\"canvas\");\n      const ctx = canvas.getContext(\"2d\");\n\n      // Dimensions du canvas selon le mode d'affichage\n      let canvasWidth = 800;\n      let canvasHeight = 600;\n      if (displayMode === 'horizontal') {\n        canvasWidth = 1200;\n        canvasHeight = 600;\n      } else if (displayMode === 'vertical') {\n        canvasWidth = 600;\n        canvasHeight = 1200;\n      } else if (displayMode === 'grid2x2') {\n        canvasWidth = 1000;\n        canvasHeight = 1000;\n      }\n      canvas.width = canvasWidth;\n      canvas.height = canvasHeight;\n      let imagesLoaded = 0;\n      const totalImages = selectedImages.length;\n      const drawTextsOnCanvas = () => {\n        // Texte du haut (global)\n        if (topText) {\n          const topFontSize = Math.floor(canvasWidth / 15);\n          const topTextY = 20;\n          ctx.font = `bold ${topFontSize}px Impact`;\n          ctx.textAlign = \"center\";\n          ctx.textBaseline = \"top\";\n          const textMetrics = ctx.measureText(topText); // CORRIGÉ\n          const textWidth = textMetrics.width;\n          const textHeight = topFontSize;\n          if (textBgOpacity > 0) {\n            const padding = 10;\n            const rectX = canvasWidth / 2 - textWidth / 2 - padding;\n            const rectY = topTextY - padding / 2;\n            const rectWidth = textWidth + padding * 2;\n            const rectHeight = textHeight + padding;\n            ctx.fillStyle = hexToRgba(textBgColor, textBgOpacity); // CORRIGÉ\n            ctx.fillRect(rectX, rectY, rectWidth, rectHeight);\n          }\n          ctx.fillStyle = textColor;\n          ctx.strokeStyle = \"#000000\";\n          ctx.lineWidth = 3;\n          ctx.strokeText(topText, canvasWidth / 2, topTextY);\n          ctx.fillText(topText, canvasWidth / 2, topTextY);\n        }\n        if (bottomText) {\n          const bottomFontSize = Math.floor(canvasWidth / 15);\n          const bottomTextY = canvasHeight - 60;\n          ctx.font = `bold ${bottomFontSize}px Impact`;\n          ctx.textAlign = \"center\";\n          ctx.textBaseline = \"bottom\";\n          const textMetrics = ctx.measureText(bottomText);\n          const textWidth = textMetrics.width;\n          const textHeight = bottomFontSize;\n          if (textBgOpacity > 0) {\n            const padding = 10;\n            const rectX = canvasWidth / 2 - textWidth / 2 - padding;\n            const rectY = bottomTextY - textHeight - padding / 2;\n            const rectWidth = textWidth + padding * 2;\n            const rectHeight = textHeight + padding;\n            ctx.fillStyle = hexToRgba(textBgColor, textBgOpacity); // CORRIGÉ\n            ctx.fillRect(rectX, rectY, rectWidth, rectHeight);\n          }\n          ctx.fillStyle = textColor;\n          ctx.strokeStyle = \"#000000\";\n          ctx.lineWidth = 3;\n          ctx.strokeText(bottomText, canvasWidth / 2, bottomTextY);\n          ctx.fillText(bottomText, canvasWidth / 2, bottomTextY);\n        }\n        customTexts.forEach(textObj => {\n          if (textObj.text && !textObj.isEditing) {\n            const fontSize = Math.floor(canvasWidth / 20);\n            ctx.font = `bold ${fontSize}px Impact`;\n            ctx.textAlign = \"center\";\n            ctx.textBaseline = \"middle\";\n\n            // Fond du texte si nécessaire\n            if (textObj.bgOpacity > 0) {\n              const textWidth = ctx.measureText(textObj.text).width;\n              const padding = 10;\n              ctx.fillStyle = `${textObj.bgColor}${Math.floor(textObj.bgOpacity * 255).toString(16).padStart(2, '0')}`;\n              ctx.fillRect(textObj.x - textWidth / 2 - padding, textObj.y - fontSize / 2 - padding / 2, textWidth + padding * 2, fontSize + padding);\n            }\n\n            // Texte\n            ctx.fillStyle = textObj.color;\n            ctx.strokeStyle = \"#000000\";\n            ctx.lineWidth = 2;\n            ctx.strokeText(textObj.text, textObj.x, textObj.y);\n            ctx.fillText(textObj.text, textObj.x, textObj.y);\n          }\n        });\n      };\n      const onImageLoad = () => {\n        imagesLoaded++;\n        if (imagesLoaded === totalImages) {\n          drawTextsOnCanvas();\n          canvas.toBlob(blob => {\n            if (blob) {\n              const url = URL.createObjectURL(blob);\n              setPreview(url);\n              resolve(blob);\n            } else {\n              reject(new Error(\"Échec génération meme\"));\n            }\n          }, \"image/png\");\n        }\n      };\n\n      // Dessiner les images selon le mode d'affichage\n      selectedImages.forEach((imageData, index) => {\n        const img = new Image();\n        img.onload = () => {\n          let x = 0,\n            y = 0,\n            width = canvasWidth,\n            height = canvasHeight;\n          if (displayMode === 'horizontal' && selectedImages.length === 2) {\n            width = canvasWidth / 2;\n            x = index * width;\n          } else if (displayMode === 'vertical' && selectedImages.length === 2) {\n            height = canvasHeight / 2;\n            y = index * height;\n          } else if (displayMode === 'grid2x2') {\n            width = canvasWidth / 2;\n            height = canvasHeight / 2;\n            x = index % 2 * width;\n            y = Math.floor(index / 2) * height;\n          }\n\n          // Remplir la zone avec un fond blanc\n          ctx.fillStyle = \"white\";\n          ctx.fillRect(x, y, width, height);\n\n          // Maintenir le ratio d'aspect et centrer\n          const aspectRatio = img.width / img.height;\n          const targetAspect = width / height;\n          let drawWidth = width;\n          let drawHeight = height;\n          let offsetX = 0;\n          let offsetY = 0;\n          if (aspectRatio > targetAspect) {\n            // Image plus large que la case\n            drawWidth = width;\n            drawHeight = width / aspectRatio;\n            offsetY = (height - drawHeight) / 2;\n          } else {\n            // Image plus haute que la case\n            drawHeight = height;\n            drawWidth = height * aspectRatio;\n            offsetX = (width - drawWidth) / 2;\n          }\n          ctx.drawImage(img, x + offsetX, y + offsetY, drawWidth, drawHeight);\n          onImageLoad();\n        };\n        img.onerror = () => {\n          console.error(\"Erreur chargement image\");\n          onImageLoad();\n        };\n        img.src = imageData.preview;\n      });\n    });\n  };\n  const handleChangeTop = event => {\n    setTopText(event.target.value);\n  };\n  const handleChangeBot = event => {\n    setBottomText(event.target.value);\n  };\n  useEffect(() => {\n    if (selectedImages.length > 0) {\n      const timeoutId = setTimeout(() => {\n        generateMemeImage().catch(console.error);\n      }, 300);\n      return () => clearTimeout(timeoutId);\n    }\n  }, [selectedImages, topText, bottomText, customTexts, displayMode, textColor, textBgColor, textBgOpacity]);\n  const handleSaveMeme = async () => {\n    if (!title.trim()) {\n      toast.error('Veuillez ajouter un titre');\n      return;\n    }\n    setIsSaving(true);\n    try {\n      // Étape 1: Générer et uploader l'image\n      const blob = await generateMemeImage();\n      if (!blob) {\n        toast.error(\"Impossible de générer l'image\");\n        return;\n      }\n      const formData = new FormData();\n      formData.append('image', blob, 'meme.png');\n\n      // Upload vers Cloudinary\n      const uploadResponse = await axios.post(\"https://memes-back.onrender.com/api/upload\", formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      // Étape 2: Sauvegarder les métadonnées en base de données\n      const memeData = {\n        title: title.trim(),\n        imageUrl: uploadResponse.data.imageUrl,\n        cloudinaryId: uploadResponse.data.cloudinaryId\n      };\n      await axios.post('https://memes-back.onrender.com/api/memes', memeData);\n      toast.success('Meme sauvegardé avec succès!');\n      resetForm();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Erreur:', error);\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Erreur lors de la sauvegarde');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  const handleDownload = async () => {\n    if (!preview) return;\n    try {\n      const response = await fetch(preview);\n      const blob = await response.blob();\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.download = `${title || 'meme'}.png`;\n      link.href = url;\n      link.click();\n      URL.revokeObjectURL(url);\n      toast.success('Meme téléchargé!');\n    } catch (error) {\n      console.error('Erreur téléchargement:', error);\n      toast.error('Erreur lors du téléchargement');\n    }\n  };\n  const resetForm = () => {\n    selectedImages.forEach(img => URL.revokeObjectURL(img.preview));\n    setSelectedImages([]);\n    setImageUrl('');\n    setCloudinaryId('');\n    setTopText('');\n    setBottomText('');\n    setTitle('');\n    setCustomTexts([]);\n    setPreview(null);\n    setActiveImageIndex(0);\n  };\n  const handleShare = async () => {\n    if (!preview) return;\n    try {\n      const response = await fetch(preview);\n      const blob = await response.blob();\n      const file = new File([blob], 'meme.png', {\n        type: blob.type\n      });\n      if (navigator.canShare && navigator.canShare({\n        files: [file]\n      })) {\n        await navigator.share({\n          title: `Meme: ${title}`,\n          text: `Regardez ce meme que j'ai créé : ${title}`,\n          files: [file]\n        });\n      } else {\n        navigator.clipboard.writeText(preview);\n        toast.success('URL copiée dans le presse-papier');\n      }\n    } catch (error) {\n      console.error(\"Erreur lors du partage:\", error);\n      toast.error(\"Partage impossible.\");\n    }\n  };\n\n  // CANVA \n  const handleCustomEditorSave = canvasData => {\n    // Ici vous pouvez traiter les données du canvas personnalisé\n    // Par exemple, les sauvegarder ou les intégrer à votre flux existant\n    console.log('Canvas personnalisé sauvegardé:', canvasData);\n    setShowCustomEditor(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"meme-generator px-4 py-8 max-w-6xl mx-auto text-white \",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-4xl font-bold mb-8 text-center\",\n      children: \"Cr\\xE9ateur de Memes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowCustomEditor(true),\n        className: \"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Mode Personnalisation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-sm text-white/70 mt-2\",\n        children: \"Cr\\xE9ez librement avec des outils de type Canva\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 13\n    }, this), showCustomEditor && /*#__PURE__*/_jsxDEV(InteractifGen, {\n      onClose: () => setShowCustomEditor(false),\n      onSave: handleCustomEditorSave\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-semibold mb-4\",\n        children: \"1. Mode d'affichage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 lg:grid-cols-4 gap-2 mb-6\",\n        children: Object.entries(displayModes).map(([mode, info]) => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setDisplayMode(mode);\n            // Limiter les images selon le nouveau mode\n            const maxImages = info.maxImages;\n            if (selectedImages.length > maxImages) {\n              const excess = selectedImages.slice(maxImages);\n              excess.forEach(img => URL.revokeObjectURL(img.preview));\n              setSelectedImages(prev => prev.slice(0, maxImages));\n            }\n          },\n          className: `p-3 rounded-lg border-2 transition ${displayMode === mode ? 'border-blue-400 bg-blue-500/30' : 'border-white/30 bg-white/10 hover:bg-white/20'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm font-medium\",\n            children: info.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs opacity-75\",\n            children: [\"Max: \", info.maxImages]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 29\n          }, this)]\n        }, mode, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-semibold mb-4\",\n        children: \"2. Ajouter des images\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"image-upload\",\n          className: \"cursor-pointer block w-full text-center py-4 border-2 border-dashed border-white/50 rounded-xl hover:bg-white/10 transition\",\n          children: isUploading ? \"📤 Upload en cours...\" : `📸 Ajouter des images (${selectedImages.length}/${displayModes[displayMode].maxImages})`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"image-upload\",\n          type: \"file\",\n          accept: \"image/*\",\n          multiple: displayModes[displayMode].maxImages > 1,\n          onChange: handleImageUpload,\n          className: \"hidden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 17\n      }, this), selectedImages.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6\",\n        children: selectedImages.map((img, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative group\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: img.preview,\n            alt: `Upload ${index + 1}`,\n            className: `w-full h-24 object-cover rounded-lg border-2 cursor-pointer transition ${activeImageIndex === index ? 'border-blue-400' : 'border-white/30'}`,\n            onClick: () => setActiveImageIndex(index)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => removeImage(img.id),\n            className: \"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition\",\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 535,\n            columnNumber: 33\n          }, this), activeImageIndex === index && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-blue-500/20 rounded-lg flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-bold\",\n              children: \"ACTIF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 37\n          }, this)]\n        }, img.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 21\n      }, this), selectedImages.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold mb-4\",\n          children: \"3. Configuration du texte\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm mb-2\",\n              children: \"Couleur du texte\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"color\",\n              value: textColor,\n              onChange: e => setTextColor(e.target.value),\n              className: \"w-full h-10 rounded border-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm mb-2\",\n              children: \"Couleur du fond\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"color\",\n              value: textBgColor,\n              onChange: e => setTextBgColor(e.target.value),\n              className: \"w-full h-10 rounded border-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm mb-2\",\n              children: [\"Opacit\\xE9 du fond: \", Math.round(textBgOpacity * 100), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"0\",\n              max: \"1\",\n              step: \"0.1\",\n              value: textBgOpacity,\n              onChange: e => setTextBgOpacity(parseFloat(e.target.value)),\n              className: \"w-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 576,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold mb-4\",\n          children: \"4. Ajouter du texte\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Titre du meme\",\n            value: title,\n            onChange: e => setTitle(e.target.value),\n            className: \"bg-white/20 border border-white/30 text-white px-4 py-2 rounded-lg placeholder-white sm:col-span-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Texte du haut\",\n            value: topText,\n            onChange: handleChangeTop,\n            className: \"bg-white/20 border border-white/30 text-white px-4 py-2 rounded-lg placeholder-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Texte du bas\",\n            value: bottomText,\n            onChange: handleChangeBot,\n            className: \"bg-white/20 border border-white/30 text-white px-4 py-2 rounded-lg placeholder-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setTextEditMode(!textEditMode),\n            className: `px-4 py-2 rounded-lg transition ${textEditMode ? 'bg-green-500 text-white' : 'bg-white/20 text-white hover:bg-white/30'}`,\n            children: textEditMode ? '✓ Mode texte activé' : '✏️ Activer mode texte'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 615,\n            columnNumber: 29\n          }, this), textEditMode && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm opacity-75\",\n            children: \"Cliquez sur l'aper\\xE7u pour ajouter du texte\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 25\n        }, this), customTexts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold mb-2\",\n            children: \"Textes personnalis\\xE9s:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: customTexts.map(textObj => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [textObj.isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: editingText,\n                onChange: e => setEditingText(e.target.value),\n                onBlur: () => {\n                  updateCustomText(textObj.id, editingText);\n                  setEditingText('');\n                },\n                onKeyDown: e => {\n                  if (e.key === 'Enter') {\n                    updateCustomText(textObj.id, editingText);\n                    setEditingText('');\n                  }\n                },\n                className: \"bg-white/20 border border-white/30 text-white px-2 py-1 rounded text-sm flex-1\",\n                autoFocus: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 639,\n                columnNumber: 49\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm flex-1\",\n                children: [\"\\\"\", textObj.text, \"\\\"\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 657,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeCustomText(textObj.id),\n                className: \"bg-red-500/70 hover:bg-red-500 text-white px-2 py-1 rounded text-xs\",\n                children: \"Supprimer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 660,\n                columnNumber: 45\n              }, this)]\n            }, textObj.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 41\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold mb-4\",\n          children: \"5. Aper\\xE7u\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative bg-white rounded-xl overflow-hidden shadow-xl p-4 max-w-2xl mx-auto mb-6\",\n          children: preview ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              onClick: handleCanvasClick,\n              className: `w-full rounded-md ${textEditMode ? 'cursor-crosshair' : ''}`,\n              style: {\n                display: 'none'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: preview,\n              alt: \"preview\",\n              className: `w-full rounded-md ${textEditMode ? 'cursor-crosshair' : ''}`,\n              onClick: handleCanvasClick\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 683,\n              columnNumber: 37\n            }, this), textEditMode && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-xs\",\n              children: \"Mode texte: cliquez pour ajouter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 676,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aspect-video bg-gray-200 rounded-md flex items-center justify-center text-gray-500\",\n            children: \"Aper\\xE7u du meme\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap gap-4 justify-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSaveMeme,\n            disabled: isSaving,\n            className: \"action-btn save-btn\",\n            children: isSaving ? '💾 Sauvegarde...' : '💾 Sauvegarder'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 704,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleDownload,\n            className: \"action-btn download-btn\",\n            children: \"\\uD83D\\uDCE5 T\\xE9l\\xE9charger\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 707,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleShare,\n            className: \"action-btn share-btn\",\n            children: \"\\uD83D\\uDCE4 Partager\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 710,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: resetForm,\n            className: \"action-btn reset-btn\",\n            children: \"\\uD83D\\uDD04 Nouveau\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 703,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 456,\n    columnNumber: 9\n  }, this);\n};\n_s(MemeGenerator, \"wl9ZU8y/OtVs7nHm6up0YYVNLto=\");\n_c = MemeGenerator;\nexport default MemeGenerator;\nvar _c;\n$RefreshReg$(_c, \"MemeGenerator\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","html2canvas","toast","InteractifGen","jsxDEV","_jsxDEV","Fragment","_Fragment","MemeGenerator","_s","selectedImages","setSelectedImages","imageUrl","setImageUrl","cloudinaryId","setCloudinaryId","topText","setTopText","bottomText","setBottomText","title","setTitle","isUploading","setIsUploading","isSaving","setIsSaving","preview","setPreview","displayMode","setDisplayMode","customTexts","setCustomTexts","textEditMode","setTextEditMode","activeImageIndex","setActiveImageIndex","textColor","setTextColor","textBgColor","setTextBgColor","textBgOpacity","setTextBgOpacity","editingText","setEditingText","showCustomEditor","setShowCustomEditor","memeRef","canvasRef","hexToRgba","hex","opacity","r","parseInt","slice","g","b","displayModes","single","name","maxImages","horizontal","vertical","grid2x2","handleImageUpload","event","files","Array","from","target","length","error","validFiles","filter","file","size","newImages","map","URL","createObjectURL","id","Date","now","Math","random","prev","setTimeout","removeImage","imageId","updated","img","removedImage","find","revokeObjectURL","text","imageIndex","handleCanvasClick","canvas","current","rect","getBoundingClientRect","x","clientX","left","width","naturalWidth","y","clientY","top","height","naturalHeight","newText","color","bgColor","bgOpacity","isEditing","updateCustomText","textId","t","removeCustomText","generateMemeImage","Promise","resolve","reject","document","createElement","ctx","getContext","canvasWidth","canvasHeight","imagesLoaded","totalImages","drawTextsOnCanvas","topFontSize","floor","topTextY","font","textAlign","textBaseline","textMetrics","measureText","textWidth","textHeight","padding","rectX","rectY","rectWidth","rectHeight","fillStyle","fillRect","strokeStyle","lineWidth","strokeText","fillText","bottomFontSize","bottomTextY","forEach","textObj","fontSize","toString","padStart","onImageLoad","toBlob","blob","url","Error","imageData","index","Image","onload","aspectRatio","targetAspect","drawWidth","drawHeight","offsetX","offsetY","drawImage","onerror","console","src","handleChangeTop","value","handleChangeBot","timeoutId","catch","clearTimeout","handleSaveMeme","trim","formData","FormData","append","uploadResponse","post","headers","memeData","data","success","resetForm","_error$response","_error$response$data","response","message","handleDownload","fetch","link","download","href","click","handleShare","File","type","navigator","canShare","share","clipboard","writeText","handleCustomEditorSave","canvasData","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onClose","onSave","Object","entries","mode","info","excess","htmlFor","accept","multiple","onChange","alt","e","round","min","max","step","parseFloat","placeholder","onBlur","onKeyDown","key","autoFocus","ref","style","display","disabled","_c","$RefreshReg$"],"sources":["C:/Users/AZIZ/Desktop/gen_meme/client/src/components/MemeGenerator.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport html2canvas from 'html2canvas';\r\nimport toast from 'react-hot-toast';\r\nimport './component.css';\r\nimport InteractifGen from './InteractifGen';\r\n\r\nconst MemeGenerator = () => {\r\n    const [selectedImages, setSelectedImages] = useState([]);\r\n    const [imageUrl, setImageUrl] = useState('');\r\n    const [cloudinaryId, setCloudinaryId] = useState('');\r\n    const [topText, setTopText] = useState('');\r\n    const [bottomText, setBottomText] = useState('');\r\n    const [title, setTitle] = useState('');\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [preview, setPreview] = useState(null);\r\n    const [displayMode, setDisplayMode] = useState('single');\r\n    const [customTexts, setCustomTexts] = useState([]);\r\n    const [textEditMode, setTextEditMode] = useState(false);\r\n    const [activeImageIndex, setActiveImageIndex] = useState(0);\r\n    const [textColor, setTextColor] = useState('#ffffff');\r\n    const [textBgColor, setTextBgColor] = useState('#000000');\r\n    const [textBgOpacity, setTextBgOpacity] = useState(0.7);\r\n    const [editingText, setEditingText] = useState('');\r\n    const [showCustomEditor, setShowCustomEditor] = useState(false);\r\n\r\n    const memeRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n\r\n    function hexToRgba(hex, opacity) {\r\n        const r = parseInt(hex.slice(1, 3), 16);\r\n        const g = parseInt(hex.slice(3, 5), 16);\r\n        const b = parseInt(hex.slice(5, 7), 16);\r\n        return `rgba(${r}, ${g}, ${b}, ${opacity})`;\r\n    }\r\n\r\n\r\n    const displayModes = {\r\n        single: { name: 'Image unique', maxImages: 1 },\r\n        horizontal: { name: 'Horizontal (2)', maxImages: 2 },\r\n        vertical: { name: 'Vertical (2)', maxImages: 2 },\r\n        grid2x2: { name: 'Grille 2x2', maxImages: 4 }\r\n    };\r\n\r\n    const handleImageUpload = async (event) => {\r\n        const files = Array.from(event.target.files);\r\n        const maxImages = displayModes[displayMode].maxImages;\r\n\r\n        if (selectedImages.length + files.length > maxImages) {\r\n            toast.error(`Maximum ${maxImages} image(s) pour ce mode d'affichage`);\r\n            return;\r\n        }\r\n\r\n        const validFiles = files.filter(file => {\r\n            if (file.size > 5 * 1024 * 1024) {\r\n                toast.error(`${file.name} est trop volumineux (max 5MB)`);\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n\r\n        const newImages = validFiles.map(file => ({\r\n            file,\r\n            preview: URL.createObjectURL(file),\r\n            id: Date.now() + Math.random()\r\n        }));\r\n\r\n        setSelectedImages(prev => [...prev, ...newImages]);\r\n        if (validFiles.length > 0) {\r\n            setIsUploading(true);\r\n            setTimeout(() => setIsUploading(false), 1000);\r\n        }\r\n    };\r\n\r\n    const removeImage = (imageId) => {\r\n        setSelectedImages(prev => {\r\n            const updated = prev.filter(img => img.id !== imageId);\r\n            // Libérer l'URL de l'image supprimée\r\n            const removedImage = prev.find(img => img.id === imageId);\r\n            if (removedImage) {\r\n                URL.revokeObjectURL(removedImage.preview);\r\n            }\r\n            return updated;\r\n        });\r\n\r\n        // Nettoyer les textes personnalisés associés à cette image\r\n        setCustomTexts(prev => prev.filter(text => text.imageIndex !== imageId));\r\n    };\r\n\r\n    const handleCanvasClick = (event) => {\r\n        if (!textEditMode || selectedImages.length === 0) return;\r\n\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n\r\n        const img = event.target;\r\n        const rect = img.getBoundingClientRect();\r\n\r\n        const x = ((event.clientX - rect.left) / rect.width) * img.naturalWidth;\r\n        const y = ((event.clientY - rect.top) / rect.height) * img.naturalHeight;\r\n\r\n        const newText = {\r\n            id: Date.now(),\r\n            text: 'Nouveau texte',\r\n            x: x,\r\n            y: y,\r\n            imageIndex: activeImageIndex,\r\n            color: textColor,\r\n            bgColor: textBgColor,\r\n            bgOpacity: textBgOpacity,\r\n            isEditing: true\r\n        };\r\n\r\n        setCustomTexts(prev => [...prev, newText]);\r\n    };\r\n\r\n    const updateCustomText = (textId, newText) => {\r\n        setCustomTexts(prev => prev.map(t =>\r\n            t.id === textId ? { ...t, text: newText, isEditing: false } : t\r\n        ));\r\n    };\r\n\r\n    const removeCustomText = (textId) => {\r\n        setCustomTexts(prev => prev.filter(t => t.id !== textId));\r\n    };\r\n\r\n    const generateMemeImage = async () => {\r\n        if (selectedImages.length === 0) return null;\r\n\r\n        return new Promise((resolve, reject) => {\r\n            const canvas = document.createElement(\"canvas\");\r\n            const ctx = canvas.getContext(\"2d\");\r\n\r\n            // Dimensions du canvas selon le mode d'affichage\r\n            let canvasWidth = 800;\r\n            let canvasHeight = 600;\r\n\r\n            if (displayMode === 'horizontal') {\r\n                canvasWidth = 1200;\r\n                canvasHeight = 600;\r\n            } else if (displayMode === 'vertical') {\r\n                canvasWidth = 600;\r\n                canvasHeight = 1200;\r\n            } else if (displayMode === 'grid2x2') {\r\n                canvasWidth = 1000;\r\n                canvasHeight = 1000;\r\n            }\r\n\r\n            canvas.width = canvasWidth;\r\n            canvas.height = canvasHeight;\r\n\r\n            let imagesLoaded = 0;\r\n            const totalImages = selectedImages.length;\r\n\r\n            const drawTextsOnCanvas = () => {\r\n                // Texte du haut (global)\r\n                if (topText) {\r\n                    const topFontSize = Math.floor(canvasWidth / 15);\r\n                    const topTextY = 20;\r\n\r\n                    ctx.font = `bold ${topFontSize}px Impact`;\r\n                    ctx.textAlign = \"center\";\r\n                    ctx.textBaseline = \"top\";\r\n\r\n                    const textMetrics = ctx.measureText(topText); // CORRIGÉ\r\n                    const textWidth = textMetrics.width;\r\n                    const textHeight = topFontSize;\r\n\r\n                    if (textBgOpacity > 0) {\r\n                        const padding = 10;\r\n                        const rectX = canvasWidth / 2 - textWidth / 2 - padding;\r\n                        const rectY = topTextY - padding / 2;\r\n                        const rectWidth = textWidth + padding * 2;\r\n                        const rectHeight = textHeight + padding;\r\n\r\n                        ctx.fillStyle = hexToRgba(textBgColor, textBgOpacity); // CORRIGÉ\r\n                        ctx.fillRect(rectX, rectY, rectWidth, rectHeight);\r\n                    }\r\n\r\n                    ctx.fillStyle = textColor;\r\n                    ctx.strokeStyle = \"#000000\";\r\n                    ctx.lineWidth = 3;\r\n                    ctx.strokeText(topText, canvasWidth / 2, topTextY);\r\n                    ctx.fillText(topText, canvasWidth / 2, topTextY);\r\n                }\r\n\r\n\r\n\r\n                if (bottomText) {\r\n                    const bottomFontSize = Math.floor(canvasWidth / 15);\r\n                    const bottomTextY = canvasHeight - 60;\r\n\r\n                    ctx.font = `bold ${bottomFontSize}px Impact`;\r\n                    ctx.textAlign = \"center\";\r\n                    ctx.textBaseline = \"bottom\";\r\n\r\n                    const textMetrics = ctx.measureText(bottomText);\r\n                    const textWidth = textMetrics.width;\r\n                    const textHeight = bottomFontSize;\r\n\r\n                    if (textBgOpacity > 0) {\r\n                        const padding = 10;\r\n                        const rectX = canvasWidth / 2 - textWidth / 2 - padding;\r\n                        const rectY = bottomTextY - textHeight - padding / 2;\r\n                        const rectWidth = textWidth + padding * 2;\r\n                        const rectHeight = textHeight + padding;\r\n\r\n                        ctx.fillStyle = hexToRgba(textBgColor, textBgOpacity); // CORRIGÉ\r\n                        ctx.fillRect(rectX, rectY, rectWidth, rectHeight);\r\n                    }\r\n\r\n                    ctx.fillStyle = textColor;\r\n                    ctx.strokeStyle = \"#000000\";\r\n                    ctx.lineWidth = 3;\r\n                    ctx.strokeText(bottomText, canvasWidth / 2, bottomTextY);\r\n                    ctx.fillText(bottomText, canvasWidth / 2, bottomTextY);\r\n                }\r\n\r\n\r\n                customTexts.forEach(textObj => {\r\n                    if (textObj.text && !textObj.isEditing) {\r\n                        const fontSize = Math.floor(canvasWidth / 20);\r\n                        ctx.font = `bold ${fontSize}px Impact`;\r\n                        ctx.textAlign = \"center\";\r\n                        ctx.textBaseline = \"middle\";\r\n\r\n                        // Fond du texte si nécessaire\r\n                        if (textObj.bgOpacity > 0) {\r\n                            const textWidth = ctx.measureText(textObj.text).width;\r\n                            const padding = 10;\r\n\r\n                            ctx.fillStyle = `${textObj.bgColor}${Math.floor(textObj.bgOpacity * 255).toString(16).padStart(2, '0')}`;\r\n                            ctx.fillRect(\r\n                                textObj.x - textWidth / 2 - padding,\r\n                                textObj.y - fontSize / 2 - padding / 2,\r\n                                textWidth + padding * 2,\r\n                                fontSize + padding\r\n                            );\r\n                        }\r\n\r\n                        // Texte\r\n                        ctx.fillStyle = textObj.color;\r\n                        ctx.strokeStyle = \"#000000\";\r\n                        ctx.lineWidth = 2;\r\n\r\n                        ctx.strokeText(textObj.text, textObj.x, textObj.y);\r\n                        ctx.fillText(textObj.text, textObj.x, textObj.y);\r\n                    }\r\n                });\r\n            };\r\n\r\n            const onImageLoad = () => {\r\n                imagesLoaded++;\r\n                if (imagesLoaded === totalImages) {\r\n                    drawTextsOnCanvas();\r\n                    canvas.toBlob((blob) => {\r\n                        if (blob) {\r\n                            const url = URL.createObjectURL(blob);\r\n                            setPreview(url);\r\n                            resolve(blob);\r\n                        } else {\r\n                            reject(new Error(\"Échec génération meme\"));\r\n                        }\r\n                    }, \"image/png\");\r\n                }\r\n            };\r\n\r\n            // Dessiner les images selon le mode d'affichage\r\n            selectedImages.forEach((imageData, index) => {\r\n                const img = new Image();\r\n                img.onload = () => {\r\n                    let x = 0, y = 0, width = canvasWidth, height = canvasHeight;\r\n\r\n                    if (displayMode === 'horizontal' && selectedImages.length === 2) {\r\n                        width = canvasWidth / 2;\r\n                        x = index * width;\r\n                    } else if (displayMode === 'vertical' && selectedImages.length === 2) {\r\n                        height = canvasHeight / 2;\r\n                        y = index * height;\r\n                    } else if (displayMode === 'grid2x2') {\r\n                        width = canvasWidth / 2;\r\n                        height = canvasHeight / 2;\r\n                        x = (index % 2) * width;\r\n                        y = Math.floor(index / 2) * height;\r\n                    }\r\n\r\n                    // Remplir la zone avec un fond blanc\r\n                    ctx.fillStyle = \"white\";\r\n                    ctx.fillRect(x, y, width, height);\r\n\r\n                    // Maintenir le ratio d'aspect et centrer\r\n                    const aspectRatio = img.width / img.height;\r\n                    const targetAspect = width / height;\r\n                    let drawWidth = width;\r\n                    let drawHeight = height;\r\n                    let offsetX = 0;\r\n                    let offsetY = 0;\r\n\r\n                    if (aspectRatio > targetAspect) {\r\n                        // Image plus large que la case\r\n                        drawWidth = width;\r\n                        drawHeight = width / aspectRatio;\r\n                        offsetY = (height - drawHeight) / 2;\r\n                    } else {\r\n                        // Image plus haute que la case\r\n                        drawHeight = height;\r\n                        drawWidth = height * aspectRatio;\r\n                        offsetX = (width - drawWidth) / 2;\r\n                    }\r\n\r\n                    ctx.drawImage(img, x + offsetX, y + offsetY, drawWidth, drawHeight);\r\n                    onImageLoad();\r\n                };\r\n\r\n\r\n                img.onerror = () => {\r\n                    console.error(\"Erreur chargement image\");\r\n                    onImageLoad();\r\n                };\r\n\r\n                img.src = imageData.preview;\r\n            });\r\n        });\r\n    };\r\n\r\n    const handleChangeTop = (event) => {\r\n        setTopText(event.target.value);\r\n    };\r\n\r\n    const handleChangeBot = (event) => {\r\n        setBottomText(event.target.value);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (selectedImages.length > 0) {\r\n            const timeoutId = setTimeout(() => {\r\n                generateMemeImage().catch(console.error);\r\n            }, 300);\r\n\r\n            return () => clearTimeout(timeoutId);\r\n        }\r\n    }, [selectedImages, topText, bottomText, customTexts, displayMode, textColor, textBgColor, textBgOpacity]);\r\n\r\n    const handleSaveMeme = async () => {\r\n        if (!title.trim()) {\r\n            toast.error('Veuillez ajouter un titre');\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            // Étape 1: Générer et uploader l'image\r\n            const blob = await generateMemeImage();\r\n            if (!blob) {\r\n                toast.error(\"Impossible de générer l'image\");\r\n                return;\r\n            }\r\n\r\n            const formData = new FormData();\r\n            formData.append('image', blob, 'meme.png');\r\n\r\n            // Upload vers Cloudinary\r\n            const uploadResponse = await axios.post(\"https://memes-back.onrender.com/api/upload\", formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                },\r\n            });\r\n\r\n            // Étape 2: Sauvegarder les métadonnées en base de données\r\n            const memeData = {\r\n                title: title.trim(),\r\n                imageUrl: uploadResponse.data.imageUrl,\r\n                cloudinaryId: uploadResponse.data.cloudinaryId,\r\n            };\r\n\r\n            await axios.post('https://memes-back.onrender.com/api/memes', memeData);\r\n\r\n            toast.success('Meme sauvegardé avec succès!');\r\n            resetForm();\r\n        } catch (error) {\r\n            console.error('Erreur:', error);\r\n            toast.error(error.response?.data?.message || 'Erreur lors de la sauvegarde');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleDownload = async () => {\r\n        if (!preview) return;\r\n\r\n        try {\r\n            const response = await fetch(preview);\r\n            const blob = await response.blob();\r\n            const url = URL.createObjectURL(blob);\r\n\r\n            const link = document.createElement('a');\r\n            link.download = `${title || 'meme'}.png`;\r\n            link.href = url;\r\n            link.click();\r\n\r\n            URL.revokeObjectURL(url);\r\n            toast.success('Meme téléchargé!');\r\n        } catch (error) {\r\n            console.error('Erreur téléchargement:', error);\r\n            toast.error('Erreur lors du téléchargement');\r\n        }\r\n    };\r\n\r\n    const resetForm = () => {\r\n        selectedImages.forEach(img => URL.revokeObjectURL(img.preview));\r\n        setSelectedImages([]);\r\n        setImageUrl('');\r\n        setCloudinaryId('');\r\n        setTopText('');\r\n        setBottomText('');\r\n        setTitle('');\r\n        setCustomTexts([]);\r\n        setPreview(null);\r\n        setActiveImageIndex(0);\r\n    };\r\n\r\n    const handleShare = async () => {\r\n        if (!preview) return;\r\n\r\n        try {\r\n            const response = await fetch(preview);\r\n            const blob = await response.blob();\r\n            const file = new File([blob], 'meme.png', { type: blob.type });\r\n\r\n            if (navigator.canShare && navigator.canShare({ files: [file] })) {\r\n                await navigator.share({\r\n                    title: `Meme: ${title}`,\r\n                    text: `Regardez ce meme que j'ai créé : ${title}`,\r\n                    files: [file],\r\n                });\r\n            } else {\r\n                navigator.clipboard.writeText(preview);\r\n                toast.success('URL copiée dans le presse-papier');\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Erreur lors du partage:\", error);\r\n            toast.error(\"Partage impossible.\");\r\n        }\r\n    };\r\n\r\n    // CANVA \r\n    const handleCustomEditorSave = (canvasData) => {\r\n        // Ici vous pouvez traiter les données du canvas personnalisé\r\n        // Par exemple, les sauvegarder ou les intégrer à votre flux existant\r\n        console.log('Canvas personnalisé sauvegardé:', canvasData);\r\n        setShowCustomEditor(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"meme-generator px-4 py-8 max-w-6xl mx-auto text-white \">\r\n            <h1 className=\"text-4xl font-bold mb-8 text-center\">Créateur de Memes</h1>\r\n\r\n            <div className=\"mb-6\">\r\n                <button\r\n                    onClick={() => setShowCustomEditor(true)}\r\n                    className=\"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105\"\r\n                >\r\n                    <span>Mode Personnalisation</span>\r\n                </button>\r\n                <p className=\"text-center text-sm text-white/70 mt-2\">\r\n                    Créez librement avec des outils de type Canva\r\n                </p>\r\n            </div>\r\n\r\n            {/* Et ajoutez ceci à la fin de votre JSX, juste avant la fermeture du div principal */}\r\n            {showCustomEditor && (\r\n                <InteractifGen\r\n                    onClose={() => setShowCustomEditor(false)}\r\n                    onSave={handleCustomEditorSave}\r\n                />\r\n            )}\r\n\r\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl\">\r\n                {/* Section Mode d'affichage */}\r\n                <h2 className=\"text-2xl font-semibold mb-4\">1. Mode d'affichage</h2>\r\n                <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-2 mb-6\">\r\n                    {Object.entries(displayModes).map(([mode, info]) => (\r\n                        <button\r\n                            key={mode}\r\n                            onClick={() => {\r\n                                setDisplayMode(mode);\r\n                                // Limiter les images selon le nouveau mode\r\n                                const maxImages = info.maxImages;\r\n                                if (selectedImages.length > maxImages) {\r\n                                    const excess = selectedImages.slice(maxImages);\r\n                                    excess.forEach(img => URL.revokeObjectURL(img.preview));\r\n                                    setSelectedImages(prev => prev.slice(0, maxImages));\r\n                                }\r\n                            }}\r\n                            className={`p-3 rounded-lg border-2 transition ${displayMode === mode\r\n                                ? 'border-blue-400 bg-blue-500/30'\r\n                                : 'border-white/30 bg-white/10 hover:bg-white/20'\r\n                                }`}\r\n                        >\r\n                            <div className=\"text-sm font-medium\">{info.name}</div>\r\n                            <div className=\"text-xs opacity-75\">Max: {info.maxImages}</div>\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Section Upload */}\r\n                <h2 className=\"text-2xl font-semibold mb-4\">2. Ajouter des images</h2>\r\n                <div className=\"mb-6\">\r\n                    <label htmlFor=\"image-upload\" className=\"cursor-pointer block w-full text-center py-4 border-2 border-dashed border-white/50 rounded-xl hover:bg-white/10 transition\">\r\n                        {isUploading ? \"📤 Upload en cours...\" : `📸 Ajouter des images (${selectedImages.length}/${displayModes[displayMode].maxImages})`}\r\n                    </label>\r\n                    <input\r\n                        id=\"image-upload\"\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        multiple={displayModes[displayMode].maxImages > 1}\r\n                        onChange={handleImageUpload}\r\n                        className=\"hidden\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Images uploadées */}\r\n                {selectedImages.length > 0 && (\r\n                    <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n                        {selectedImages.map((img, index) => (\r\n                            <div key={img.id} className=\"relative group\">\r\n                                <img\r\n                                    src={img.preview}\r\n                                    alt={`Upload ${index + 1}`}\r\n                                    className={`w-full h-24 object-cover rounded-lg border-2 cursor-pointer transition ${activeImageIndex === index ? 'border-blue-400' : 'border-white/30'\r\n                                        }`}\r\n                                    onClick={() => setActiveImageIndex(index)}\r\n                                />\r\n                                <button\r\n                                    onClick={() => removeImage(img.id)}\r\n                                    className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition\"\r\n                                >\r\n                                    ✕\r\n                                </button>\r\n                                {activeImageIndex === index && (\r\n                                    <div className=\"absolute inset-0 bg-blue-500/20 rounded-lg flex items-center justify-center\">\r\n                                        <span className=\"text-xs font-bold\">ACTIF</span>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Configuration du texte */}\r\n                {selectedImages.length > 0 && (\r\n                    <>\r\n                        <h2 className=\"text-2xl font-semibold mb-4\">3. Configuration du texte</h2>\r\n                        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6\">\r\n                            <div>\r\n                                <label className=\"block text-sm mb-2\">Couleur du texte</label>\r\n                                <input\r\n                                    type=\"color\"\r\n                                    value={textColor}\r\n                                    onChange={(e) => setTextColor(e.target.value)}\r\n                                    className=\"w-full h-10 rounded border-none\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm mb-2\">Couleur du fond</label>\r\n                                <input\r\n                                    type=\"color\"\r\n                                    value={textBgColor}\r\n                                    onChange={(e) => setTextBgColor(e.target.value)}\r\n                                    className=\"w-full h-10 rounded border-none\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm mb-2\">Opacité du fond: {Math.round(textBgOpacity * 100)}%</label>\r\n                                <input\r\n                                    type=\"range\"\r\n                                    min=\"0\"\r\n                                    max=\"1\"\r\n                                    step=\"0.1\"\r\n                                    value={textBgOpacity}\r\n                                    onChange={(e) => setTextBgOpacity(parseFloat(e.target.value))}\r\n                                    className=\"w-full\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Section Texte */}\r\n                        <h2 className=\"text-2xl font-semibold mb-4\">4. Ajouter du texte</h2>\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Titre du meme\"\r\n                                value={title}\r\n                                onChange={(e) => setTitle(e.target.value)}\r\n                                className=\"bg-white/20 border border-white/30 text-white px-4 py-2 rounded-lg placeholder-white sm:col-span-2\"\r\n                            />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Texte du haut\"\r\n                                value={topText}\r\n                                onChange={handleChangeTop}\r\n                                className=\"bg-white/20 border border-white/30 text-white px-4 py-2 rounded-lg placeholder-white\"\r\n                            />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Texte du bas\"\r\n                                value={bottomText}\r\n                                onChange={handleChangeBot}\r\n                                className=\"bg-white/20 border border-white/30 text-white px-4 py-2 rounded-lg placeholder-white\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-4 mb-4\">\r\n                            <button\r\n                                onClick={() => setTextEditMode(!textEditMode)}\r\n                                className={`px-4 py-2 rounded-lg transition ${textEditMode\r\n                                    ? 'bg-green-500 text-white'\r\n                                    : 'bg-white/20 text-white hover:bg-white/30'\r\n                                    }`}\r\n                            >\r\n                                {textEditMode ? '✓ Mode texte activé' : '✏️ Activer mode texte'}\r\n                            </button>\r\n                            {textEditMode && (\r\n                                <span className=\"text-sm opacity-75\">\r\n                                    Cliquez sur l'aperçu pour ajouter du texte\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Textes personnalisés */}\r\n                        {customTexts.length > 0 && (\r\n                            <div className=\"mb-4\">\r\n                                <h3 className=\"text-lg font-semibold mb-2\">Textes personnalisés:</h3>\r\n                                <div className=\"space-y-2\">\r\n                                    {customTexts.map((textObj) => (\r\n                                        <div key={textObj.id} className=\"flex items-center gap-2\">\r\n                                            {textObj.isEditing ? (\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={editingText}\r\n                                                    onChange={(e) => setEditingText(e.target.value)}\r\n                                                    onBlur={() => {\r\n                                                        updateCustomText(textObj.id, editingText);\r\n                                                        setEditingText('');\r\n                                                    }}\r\n                                                    onKeyDown={(e) => {\r\n                                                        if (e.key === 'Enter') {\r\n                                                            updateCustomText(textObj.id, editingText);\r\n                                                            setEditingText('');\r\n                                                        }\r\n                                                    }}\r\n                                                    className=\"bg-white/20 border border-white/30 text-white px-2 py-1 rounded text-sm flex-1\"\r\n                                                    autoFocus\r\n                                                />\r\n                                            ) : (\r\n                                                <span className=\"text-sm flex-1\">\"{textObj.text}\"</span>\r\n                                            )}\r\n\r\n                                            <button\r\n                                                onClick={() => removeCustomText(textObj.id)}\r\n                                                className=\"bg-red-500/70 hover:bg-red-500 text-white px-2 py-1 rounded text-xs\"\r\n                                            >\r\n                                                Supprimer\r\n                                            </button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Aperçu */}\r\n                        <h2 className=\"text-2xl font-semibold mb-4\">5. Aperçu</h2>\r\n                        <div className=\"relative bg-white rounded-xl overflow-hidden shadow-xl p-4 max-w-2xl mx-auto mb-6\">\r\n                            {preview ? (\r\n                                <div className=\"relative\">\r\n                                    <canvas\r\n                                        ref={canvasRef}\r\n                                        onClick={handleCanvasClick}\r\n                                        className={`w-full rounded-md ${textEditMode ? 'cursor-crosshair' : ''}`}\r\n                                        style={{ display: 'none' }}\r\n                                    />\r\n                                    <img\r\n                                        src={preview}\r\n                                        alt=\"preview\"\r\n                                        className={`w-full rounded-md ${textEditMode ? 'cursor-crosshair' : ''}`}\r\n                                        onClick={handleCanvasClick}\r\n                                    />\r\n                                    {textEditMode && (\r\n                                        <div className=\"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-xs\">\r\n                                            Mode texte: cliquez pour ajouter\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"aspect-video bg-gray-200 rounded-md flex items-center justify-center text-gray-500\">\r\n                                    Aperçu du meme\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Actions */}\r\n                        <div className=\"flex flex-wrap gap-4 justify-center\">\r\n                            <button onClick={handleSaveMeme} disabled={isSaving} className=\"action-btn save-btn\">\r\n                                {isSaving ? '💾 Sauvegarde...' : '💾 Sauvegarder'}\r\n                            </button>\r\n                            <button onClick={handleDownload} className=\"action-btn download-btn\">\r\n                                📥 Télécharger\r\n                            </button>\r\n                            <button onClick={handleShare} className=\"action-btn share-btn\">\r\n                                📤 Partager\r\n                            </button>\r\n                            <button onClick={resetForm} className=\"action-btn reset-btn\">\r\n                                🔄 Nouveau\r\n                            </button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MemeGenerator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}