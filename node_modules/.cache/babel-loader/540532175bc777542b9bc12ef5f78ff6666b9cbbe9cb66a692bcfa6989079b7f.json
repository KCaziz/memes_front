{"ast":null,"code":"import _objectSpread from\"C:/Users/AZIZ/Desktop/gen_meme/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useCallback,useEffect}from'react';import{Move,RotateCw,Copy,Trash2,Type,Image,Download,Palette}from'lucide-react';import{Image as ImageIcon}from\"lucide-react\";import{Download as DownloadIcon}from\"lucide-react\";import*as LucideIcons from'lucide-react';// Import global\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const InteractifGen=_ref=>{let{onClose,onSave}=_ref;const[elements,setElements]=useState([]);const[selectedElement,setSelectedElement]=useState(null);const[dragOffset,setDragOffset]=useState({x:0,y:0});const[isDragging,setIsDragging]=useState(false);const[canvasSize]=useState({width:800,height:800});const[textInput,setTextInput]=useState('');const[showTextInput,setShowTextInput]=useState(false);const[textStyle,setTextStyle]=useState({fontSize:32,color:'#000000',fontWeight:'bold'});const[title,setTitle]=useState('');const[isSaving,setIsSaving]=useState(false);const[isUploading,setIsUploading]=useState(false);const canvasRef=useRef(null);const fileInputRef=useRef(null);// Génération d'ID unique\nconst generateId=()=>Date.now()+Math.random();// Ajouter du texte\nconst addText=()=>{if(!textInput.trim())return;const newElement={id:generateId(),type:'text',content:textInput,x:canvasSize.width/2-100,y:canvasSize.height/2,width:200,height:50,style:_objectSpread({},textStyle),rotation:0};setElements(prev=>[...prev,newElement]);setTextInput('');setShowTextInput(false);};// Ajouter une image\nconst handleImageUpload=event=>{const file=event.target.files[0];if(!file)return;const reader=new FileReader();reader.onload=e=>{const img=new window.Image();// Utilisez window.Image pour le constructeur natif\nimg.onload=()=>{const maxSize=200;const aspectRatio=img.width/img.height;let width=maxSize;let height=maxSize;if(aspectRatio>1){height=maxSize/aspectRatio;}else{width=maxSize*aspectRatio;}const newElement={id:generateId(),type:'image',content:e.target.result,x:canvasSize.width/2-width/2,y:canvasSize.height/2-height/2,width,height,rotation:0};setElements(prev=>[...prev,newElement]);};img.src=e.target.result;};reader.readAsDataURL(file);};// Gestion du drag & drop\nconst handleMouseDown=useCallback((e,element)=>{e.preventDefault();const rect=canvasRef.current.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;setSelectedElement(element.id);setIsDragging(true);setDragOffset({x:x-element.x,y:y-element.y});},[]);const handleMouseMove=useCallback(e=>{if(!isDragging||!selectedElement)return;const rect=canvasRef.current.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;setElements(prev=>prev.map(el=>el.id===selectedElement?_objectSpread(_objectSpread({},el),{},{x:Math.max(0,Math.min(canvasSize.width-el.width,x-dragOffset.x)),y:Math.max(0,Math.min(canvasSize.height-el.height,y-dragOffset.y))}):el));},[isDragging,selectedElement,dragOffset,canvasSize]);const handleMouseUp=useCallback(()=>{setIsDragging(false);setDragOffset({x:0,y:0});},[]);useEffect(()=>{if(isDragging){document.addEventListener('mousemove',handleMouseMove);document.addEventListener('mouseup',handleMouseUp);}return()=>{document.removeEventListener('mousemove',handleMouseMove);document.removeEventListener('mouseup',handleMouseUp);};},[isDragging,handleMouseMove,handleMouseUp]);// Dupliquer un élément\nconst duplicateElement=elementId=>{const element=elements.find(el=>el.id===elementId);if(!element)return;const duplicated=_objectSpread(_objectSpread({},element),{},{id:generateId(),x:element.x+20,y:element.y+20});setElements(prev=>[...prev,duplicated]);};// Supprimer un élément\nconst deleteElement=elementId=>{setElements(prev=>prev.filter(el=>el.id!==elementId));if(selectedElement===elementId){setSelectedElement(null);}};// Faire pivoter un élément\nconst rotateElement=elementId=>{setElements(prev=>prev.map(el=>el.id===elementId?_objectSpread(_objectSpread({},el),{},{rotation:(el.rotation+15)%360}):el));};// Redimensionner un élément\nconst resizeElement=(elementId,newWidth,newHeight)=>{setElements(prev=>prev.map(el=>el.id===elementId?_objectSpread(_objectSpread({},el),{},{width:Math.max(20,newWidth),height:Math.max(20,newHeight)}):el));};const generateCanvasBlob=async()=>{const canvas=document.createElement('canvas');const ctx=canvas.getContext('2d');canvas.width=canvasSize.width;canvas.height=canvasSize.height;// Fond blanc\nctx.fillStyle='white';ctx.fillRect(0,0,canvas.width,canvas.height);for(const element of elements){ctx.save();if(element.rotation){const centerX=element.x+element.width/2;const centerY=element.y+element.height/2;ctx.translate(centerX,centerY);ctx.rotate(element.rotation*Math.PI/180);ctx.translate(-centerX,-centerY);}if(element.type==='text'){ctx.font=\"\".concat(element.style.fontWeight,\" \").concat(element.style.fontSize,\"px \").concat(element.style.fontFamily||'Arial');ctx.fillStyle=element.style.color;ctx.textBaseline='top';ctx.fillText(element.content,element.x,element.y);}else if(element.type==='image'){const img=new window.Image();// Utilisez window.Image explicitement\nawait new Promise(resolve=>{img.onload=resolve;img.onerror=resolve;// Gestion des erreurs\nimg.src=element.content;});ctx.drawImage(img,element.x,element.y,element.width,element.height);}ctx.restore();}return new Promise(resolve=>{canvas.toBlob(resolve,'image/png',1);});};const downloadCanvas=async()=>{try{const blob=await generateCanvasBlob();if(!blob)throw new Error('Erreur de génération');const url=URL.createObjectURL(blob);const link=document.createElement('a');link.download=\"\".concat(title,\".png\");link.href=url;link.click();setTimeout(()=>URL.revokeObjectURL(url),100);}catch(error){console.error('Échec du téléchargement:',error);alert('Impossible de télécharger le meme');}};// Partager le canvas\nconst shareCanvas=async()=>{try{const blob=await generateCanvasBlob();const file=new File([blob],\"\".concat(title,\".png\"),{type:blob.type});if(navigator.canShare&&navigator.canShare({files:[file]})){await navigator.share({title:\"Meme: \".concat(title||'Mon création'),text:\"Regardez ce meme que j'ai cr\\xE9\\xE9 : \".concat(title||'Mon création'),files:[file]});}else{// Fallback: copier un lien ou télécharger\nconst url=URL.createObjectURL(blob);await navigator.clipboard.writeText(url);alert('Lien copié dans le presse-papier');URL.revokeObjectURL(url);}}catch(error){console.error(\"Erreur lors du partage:\",error);alert(\"Partage impossible.\");}};// Sauvegarder en base de données (comme MemeGenerator)\nconst handleSaveCanvas=async()=>{if(!title.trim()){alert('Veuillez ajouter un titre');return;}if(elements.length===0){alert('Créez au moins un élément avant de sauvegarder');return;}setIsSaving(true);try{// Étape 1: Générer le blob\nconst blob=await generateCanvasBlob();if(!blob){alert(\"Impossible de générer l'image\");return;}// Étape 2: Upload vers Cloudinary\nconst formData=new FormData();formData.append('image',blob,'custom-meme.png');const uploadResponse=await fetch(\"https://api.memes.az-tenders.com/api/upload\",{method:'POST',body:formData});if(!uploadResponse.ok){throw new Error('Erreur upload');}const uploadData=await uploadResponse.json();// Étape 3: Sauvegarder en base de données\nconst memeData={title:title.trim(),imageUrl:uploadData.imageUrl,cloudinaryId:uploadData.cloudinaryId};const saveResponse=await fetch('https://api.memes.az-tenders.com/api/memes',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(memeData)});if(!saveResponse.ok){throw new Error('Erreur sauvegarde');}alert('Meme sauvegardé avec succès!');// Optionnel: fermer l'éditeur après sauvegarde\n// onClose();\n}catch(error){console.error('Erreur:',error);alert('Erreur lors de la sauvegarde');}finally{setIsSaving(false);}};const selectedEl=elements.find(el=>el.id===selectedElement);return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-xl w-full max-w-5xl max-h-[70vh] mx-auto mb-0 sm:scale-[.85] flex flex-col md:flex-row \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 sm:p-4 md:p-6 md:w-[40%] md:scale-[.95] scale-[.85]  overflow-y-auto border-b md:border-b-0 md:border-r border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"\\xC9diteur Canvas\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-500 hover:text-gray-700 text-2xl\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-700\",children:\"Ajouter des \\xE9l\\xE9ments\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Titre\",value:title,onChange:e=>setTitle(e.target.value),className:\"bg-white/20 border border-black/30 text-black px-4 py-2 rounded-lg placeholder-gray sm:col-span-2\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowTextInput(!showTextInput),className:\"w-full flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition\",children:[/*#__PURE__*/_jsx(Type,{size:20}),\"Ajouter du texte\"]}),showTextInput&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 p-4 bg-white text-black rounded-lg border\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:textInput,onChange:e=>setTextInput(e.target.value),placeholder:\"Votre texte...\",className:\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-600\",children:\"Taille\"}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"12\",max:\"72\",value:textStyle.fontSize,onChange:e=>setTextStyle(prev=>_objectSpread(_objectSpread({},prev),{},{fontSize:parseInt(e.target.value)})),className:\"w-full\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs\",children:[textStyle.fontSize,\"px\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-600\",children:\"Couleur\"}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:textStyle.color,onChange:e=>setTextStyle(prev=>_objectSpread(_objectSpread({},prev),{},{color:e.target.value})),className:\"w-full h-8 rounded border\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addText,className:\"w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition\",children:\"Ajouter\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},className:\"w-full flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition\",children:[/*#__PURE__*/_jsx(ImageIcon,{size:20}),\"Ajouter une image\"]}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"hidden\"})]}),selectedEl&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 p-4 bg-white rounded-lg border\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-700\",children:\"\\xC9l\\xE9ment s\\xE9lectionn\\xE9\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2 text-black\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-600\",children:\"Position X\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:Math.round(selectedEl.x),onChange:e=>setElements(prev=>prev.map(el=>el.id===selectedElement?_objectSpread(_objectSpread({},el),{},{x:parseInt(e.target.value)||0}):el)),className:\"w-full px-2 py-1 text-sm border rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-600\",children:\"Position Y\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:Math.round(selectedEl.y),onChange:e=>setElements(prev=>prev.map(el=>el.id===selectedElement?_objectSpread(_objectSpread({},el),{},{y:parseInt(e.target.value)||0}):el)),className:\"w-full px-2 py-1 text-sm border rounded\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2 text-black\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-600\",children:\"Largeur\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:Math.round(selectedEl.width),onChange:e=>resizeElement(selectedElement,parseInt(e.target.value)||20,selectedEl.height),className:\"w-full px-2 py-1 text-sm border rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-gray-600\",children:\"Hauteur\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:Math.round(selectedEl.height),onChange:e=>resizeElement(selectedElement,selectedEl.width,parseInt(e.target.value)||20),className:\"w-full px-2 py-1 text-sm border rounded\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>rotateElement(selectedElement),className:\"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition text-sm\",children:/*#__PURE__*/_jsx(RotateCw,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>duplicateElement(selectedElement),className:\"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition text-sm\",children:/*#__PURE__*/_jsx(Copy,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteElement(selectedElement),className:\"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition text-sm\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]})]}),elements.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-700 mb-2\",children:[\"\\xC9l\\xE9ments (\",elements.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-40 overflow-y-auto text-black\",children:elements.map((element,index)=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>setSelectedElement(element.id),className:\"p-2 rounded cursor-pointer border transition \".concat(selectedElement===element.id?'border-blue-500 bg-blue-50':'border-gray-200 hover:bg-gray-50'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium\",children:[element.type==='text'?'📝':'🖼️',element.type==='text'?\" \\\"\".concat(element.content.substring(0,20)).concat(element.content.length>20?'...':'',\"\\\"\"):\" Image \".concat(index+1)]})},element.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 sm:p-4 md:p-6 bg-gray-50 md:bg-gray-100 flex flex-col overflow-y-auto transition-colors duration-200 sm:h-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Canvas: \",canvasSize.width,\" \\xD7 \",canvasSize.height,\"px\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveCanvas,disabled:isSaving||!title.trim(),className:\"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition disabled:opacity-50 disabled:cursor-not-allowed\",children:isSaving?'Sauvegarde...':'Sauvegarder'}),/*#__PURE__*/_jsx(\"button\",{onClick:downloadCanvas,disabled:elements.length===0,className:\"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition disabled:opacity-50 disabled:cursor-not-allowed\",children:\"T\\xE9l\\xE9charger\"}),/*#__PURE__*/_jsx(\"button\",{onClick:shareCanvas,disabled:elements.length===0,className:\"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Partager\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{ref:canvasRef,className:\"relative bg-white shadow-lg border-2 border-gray-300\",style:{width:canvasSize.width,height:canvasSize.height,maxWidth:'100%',maxHeight:'100%'},onClick:e=>{if(e.target===canvasRef.current){setSelectedElement(null);}},children:[elements.map(element=>/*#__PURE__*/_jsxs(\"div\",{className:\"absolute cursor-move border-2 \".concat(selectedElement===element.id?'border-blue-500 border-dashed':'border-transparent hover:border-gray-300'),style:{left:element.x,top:element.y,width:element.width,height:element.height,transform:\"rotate(\".concat(element.rotation,\"deg)\"),transformOrigin:'center center'},onMouseDown:e=>handleMouseDown(e,element),children:[element.type==='text'?/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full flex items-center justify-center text-center leading-tight overflow-hidden\",style:{fontSize:element.style.fontSize,color:element.style.color,fontWeight:element.style.fontWeight,wordBreak:'break-word'},children:element.content}):/*#__PURE__*/_jsx(\"img\",{src:element.content,alt:\"Element\",className:\"w-full h-full object-cover\",draggable:false}),selectedElement===element.id&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"absolute -right-1 -bottom-1 w-3 h-3 bg-blue-500 border border-white cursor-se-resize\",onMouseDown:e=>{e.stopPropagation();const startX=e.clientX;const startY=e.clientY;const startWidth=element.width;const startHeight=element.height;const handleResize=e=>{const deltaX=e.clientX-startX;const deltaY=e.clientY-startY;resizeElement(element.id,startWidth+deltaX,startHeight+deltaY);};const handleMouseUp=()=>{document.removeEventListener('mousemove',handleResize);document.removeEventListener('mouseup',handleMouseUp);};document.addEventListener('mousemove',handleResize);document.addEventListener('mouseup',handleMouseUp);}})})]},element.id)),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 pointer-events-none opacity-10\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"100%\",height:\"100%\",children:[/*#__PURE__*/_jsx(\"defs\",{children:/*#__PURE__*/_jsx(\"pattern\",{id:\"grid\",width:\"20\",height:\"20\",patternUnits:\"userSpaceOnUse\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M 20 0 L 0 0 0 20\",fill:\"none\",stroke:\"#000\",strokeWidth:\"1\"})})}),/*#__PURE__*/_jsx(\"rect\",{width:\"100%\",height:\"100%\",fill:\"url(#grid)\"})]})})]})})]})]})});};export default InteractifGen;","map":{"version":3,"names":["React","useState","useRef","useCallback","useEffect","Move","RotateCw","Copy","Trash2","Type","Image","Download","Palette","ImageIcon","DownloadIcon","LucideIcons","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","InteractifGen","_ref","onClose","onSave","elements","setElements","selectedElement","setSelectedElement","dragOffset","setDragOffset","x","y","isDragging","setIsDragging","canvasSize","width","height","textInput","setTextInput","showTextInput","setShowTextInput","textStyle","setTextStyle","fontSize","color","fontWeight","title","setTitle","isSaving","setIsSaving","isUploading","setIsUploading","canvasRef","fileInputRef","generateId","Date","now","Math","random","addText","trim","newElement","id","type","content","style","_objectSpread","rotation","prev","handleImageUpload","event","file","target","files","reader","FileReader","onload","e","img","window","maxSize","aspectRatio","result","src","readAsDataURL","handleMouseDown","element","preventDefault","rect","current","getBoundingClientRect","clientX","left","clientY","top","handleMouseMove","map","el","max","min","handleMouseUp","document","addEventListener","removeEventListener","duplicateElement","elementId","find","duplicated","deleteElement","filter","rotateElement","resizeElement","newWidth","newHeight","generateCanvasBlob","canvas","createElement","ctx","getContext","fillStyle","fillRect","save","centerX","centerY","translate","rotate","PI","font","concat","fontFamily","textBaseline","fillText","Promise","resolve","onerror","drawImage","restore","toBlob","downloadCanvas","blob","Error","url","URL","createObjectURL","link","download","href","click","setTimeout","revokeObjectURL","error","console","alert","shareCanvas","File","navigator","canShare","share","text","clipboard","writeText","handleSaveCanvas","length","formData","FormData","append","uploadResponse","fetch","method","body","ok","uploadData","json","memeData","imageUrl","cloudinaryId","saveResponse","headers","JSON","stringify","selectedEl","className","children","onClick","placeholder","value","onChange","size","parseInt","_fileInputRef$current","ref","accept","round","index","substring","disabled","maxWidth","maxHeight","transform","transformOrigin","onMouseDown","wordBreak","alt","draggable","stopPropagation","startX","startY","startWidth","startHeight","handleResize","deltaX","deltaY","patternUnits","d","fill","stroke","strokeWidth"],"sources":["C:/Users/AZIZ/Desktop/gen_meme/client/src/components/InteractifGen.js"],"sourcesContent":["import React, { useState, useRef, useCallback, useEffect } from 'react';\r\nimport { Move, RotateCw, Copy, Trash2, Type, Image, Download, Palette } from 'lucide-react';\r\nimport { Image as ImageIcon } from \"lucide-react\";\r\nimport { Download as DownloadIcon } from \"lucide-react\";\r\nimport * as LucideIcons from 'lucide-react'; // Import global\r\n\r\n\r\nconst InteractifGen = ({ onClose, onSave }) => {\r\n    const [elements, setElements] = useState([]);\r\n    const [selectedElement, setSelectedElement] = useState(null);\r\n    const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [canvasSize] = useState({ width: 800, height: 800 });\r\n    const [textInput, setTextInput] = useState('');\r\n    const [showTextInput, setShowTextInput] = useState(false);\r\n    const [textStyle, setTextStyle] = useState({\r\n        fontSize: 32,\r\n        color: '#000000',\r\n        fontWeight: 'bold'\r\n    });\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [isUploading, setIsUploading] = useState(false);\r\n\r\n    const canvasRef = useRef(null);\r\n    const fileInputRef = useRef(null);\r\n\r\n    // Génération d'ID unique\r\n    const generateId = () => Date.now() + Math.random();\r\n\r\n    // Ajouter du texte\r\n    const addText = () => {\r\n        if (!textInput.trim()) return;\r\n\r\n        const newElement = {\r\n            id: generateId(),\r\n            type: 'text',\r\n            content: textInput,\r\n            x: canvasSize.width / 2 - 100,\r\n            y: canvasSize.height / 2,\r\n            width: 200,\r\n            height: 50,\r\n            style: { ...textStyle },\r\n            rotation: 0\r\n        };\r\n\r\n        setElements(prev => [...prev, newElement]);\r\n        setTextInput('');\r\n        setShowTextInput(false);\r\n    };\r\n\r\n    // Ajouter une image\r\n    const handleImageUpload = (event) => {\r\n        const file = event.target.files[0];\r\n        if (!file) return;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            const img = new window.Image(); // Utilisez window.Image pour le constructeur natif\r\n            img.onload = () => {\r\n                const maxSize = 200;\r\n                const aspectRatio = img.width / img.height;\r\n                let width = maxSize;\r\n                let height = maxSize;\r\n\r\n                if (aspectRatio > 1) {\r\n                    height = maxSize / aspectRatio;\r\n                } else {\r\n                    width = maxSize * aspectRatio;\r\n                }\r\n\r\n                const newElement = {\r\n                    id: generateId(),\r\n                    type: 'image',\r\n                    content: e.target.result,\r\n                    x: canvasSize.width / 2 - width / 2,\r\n                    y: canvasSize.height / 2 - height / 2,\r\n                    width,\r\n                    height,\r\n                    rotation: 0\r\n                };\r\n\r\n                setElements(prev => [...prev, newElement]);\r\n            };\r\n            img.src = e.target.result;\r\n        };\r\n        reader.readAsDataURL(file);\r\n    };\r\n    // Gestion du drag & drop\r\n    const handleMouseDown = useCallback((e, element) => {\r\n        e.preventDefault();\r\n        const rect = canvasRef.current.getBoundingClientRect();\r\n        const x = e.clientX - rect.left;\r\n        const y = e.clientY - rect.top;\r\n\r\n        setSelectedElement(element.id);\r\n        setIsDragging(true);\r\n        setDragOffset({\r\n            x: x - element.x,\r\n            y: y - element.y\r\n        });\r\n    }, []);\r\n\r\n    const handleMouseMove = useCallback((e) => {\r\n        if (!isDragging || !selectedElement) return;\r\n\r\n        const rect = canvasRef.current.getBoundingClientRect();\r\n        const x = e.clientX - rect.left;\r\n        const y = e.clientY - rect.top;\r\n\r\n        setElements(prev => prev.map(el =>\r\n            el.id === selectedElement\r\n                ? {\r\n                    ...el,\r\n                    x: Math.max(0, Math.min(canvasSize.width - el.width, x - dragOffset.x)),\r\n                    y: Math.max(0, Math.min(canvasSize.height - el.height, y - dragOffset.y))\r\n                }\r\n                : el\r\n        ));\r\n    }, [isDragging, selectedElement, dragOffset, canvasSize]);\r\n\r\n    const handleMouseUp = useCallback(() => {\r\n        setIsDragging(false);\r\n        setDragOffset({ x: 0, y: 0 });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (isDragging) {\r\n            document.addEventListener('mousemove', handleMouseMove);\r\n            document.addEventListener('mouseup', handleMouseUp);\r\n        }\r\n\r\n        return () => {\r\n            document.removeEventListener('mousemove', handleMouseMove);\r\n            document.removeEventListener('mouseup', handleMouseUp);\r\n        };\r\n    }, [isDragging, handleMouseMove, handleMouseUp]);\r\n\r\n    // Dupliquer un élément\r\n    const duplicateElement = (elementId) => {\r\n        const element = elements.find(el => el.id === elementId);\r\n        if (!element) return;\r\n\r\n        const duplicated = {\r\n            ...element,\r\n            id: generateId(),\r\n            x: element.x + 20,\r\n            y: element.y + 20\r\n        };\r\n\r\n        setElements(prev => [...prev, duplicated]);\r\n    };\r\n\r\n    // Supprimer un élément\r\n    const deleteElement = (elementId) => {\r\n        setElements(prev => prev.filter(el => el.id !== elementId));\r\n        if (selectedElement === elementId) {\r\n            setSelectedElement(null);\r\n        }\r\n    };\r\n\r\n    // Faire pivoter un élément\r\n    const rotateElement = (elementId) => {\r\n        setElements(prev => prev.map(el =>\r\n            el.id === elementId\r\n                ? { ...el, rotation: (el.rotation + 15) % 360 }\r\n                : el\r\n        ));\r\n    };\r\n\r\n    // Redimensionner un élément\r\n    const resizeElement = (elementId, newWidth, newHeight) => {\r\n        setElements(prev => prev.map(el =>\r\n            el.id === elementId\r\n                ? { ...el, width: Math.max(20, newWidth), height: Math.max(20, newHeight) }\r\n                : el\r\n        ));\r\n    };\r\n    const generateCanvasBlob = async () => {\r\n        const canvas = document.createElement('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n        canvas.width = canvasSize.width;\r\n        canvas.height = canvasSize.height;\r\n      \r\n        // Fond blanc\r\n        ctx.fillStyle = 'white';\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      \r\n        for (const element of elements) {\r\n          ctx.save();\r\n          \r\n          if (element.rotation) {\r\n            const centerX = element.x + element.width / 2;\r\n            const centerY = element.y + element.height / 2;\r\n            ctx.translate(centerX, centerY);\r\n            ctx.rotate((element.rotation * Math.PI) / 180);\r\n            ctx.translate(-centerX, -centerY);\r\n          }\r\n      \r\n          if (element.type === 'text') {\r\n            ctx.font = `${element.style.fontWeight} ${element.style.fontSize}px ${element.style.fontFamily || 'Arial'}`;\r\n            ctx.fillStyle = element.style.color;\r\n            ctx.textBaseline = 'top';\r\n            ctx.fillText(element.content, element.x, element.y);\r\n          } \r\n          else if (element.type === 'image') {\r\n            const img = new window.Image(); // Utilisez window.Image explicitement\r\n            await new Promise((resolve) => {\r\n              img.onload = resolve;\r\n              img.onerror = resolve; // Gestion des erreurs\r\n              img.src = element.content;\r\n            });\r\n            ctx.drawImage(img, element.x, element.y, element.width, element.height);\r\n          }\r\n          \r\n          ctx.restore();\r\n        }\r\n      \r\n        return new Promise((resolve) => {\r\n          canvas.toBlob(resolve, 'image/png', 1);\r\n        });\r\n      };\r\n      \r\n      const downloadCanvas = async () => {\r\n        try {\r\n          const blob = await generateCanvasBlob();\r\n          if (!blob) throw new Error('Erreur de génération');\r\n          \r\n          const url = URL.createObjectURL(blob);\r\n          const link = document.createElement('a');\r\n          link.download = `${title}.png`;\r\n          link.href = url;\r\n          link.click();\r\n          setTimeout(() => URL.revokeObjectURL(url), 100);\r\n        } catch (error) {\r\n          console.error('Échec du téléchargement:', error);\r\n          alert('Impossible de télécharger le meme');\r\n        }\r\n      };\r\n    // Partager le canvas\r\n    const shareCanvas = async () => {\r\n        try {\r\n            const blob = await generateCanvasBlob();\r\n            const file = new File([blob], `${title}.png`, { type: blob.type });\r\n\r\n            if (navigator.canShare && navigator.canShare({ files: [file] })) {\r\n                await navigator.share({\r\n                    title: `Meme: ${title || 'Mon création'}`,\r\n                    text: `Regardez ce meme que j'ai créé : ${title || 'Mon création'}`,\r\n                    files: [file],\r\n                });\r\n            } else {\r\n                // Fallback: copier un lien ou télécharger\r\n                const url = URL.createObjectURL(blob);\r\n                await navigator.clipboard.writeText(url);\r\n                alert('Lien copié dans le presse-papier');\r\n                URL.revokeObjectURL(url);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Erreur lors du partage:\", error);\r\n            alert(\"Partage impossible.\");\r\n        }\r\n    };\r\n\r\n    // Sauvegarder en base de données (comme MemeGenerator)\r\n    const handleSaveCanvas = async () => {\r\n        if (!title.trim()) {\r\n            alert('Veuillez ajouter un titre');\r\n            return;\r\n        }\r\n\r\n        if (elements.length === 0) {\r\n            alert('Créez au moins un élément avant de sauvegarder');\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            // Étape 1: Générer le blob\r\n            const blob = await generateCanvasBlob();\r\n            if (!blob) {\r\n                alert(\"Impossible de générer l'image\");\r\n                return;\r\n            }\r\n\r\n            // Étape 2: Upload vers Cloudinary\r\n            const formData = new FormData();\r\n            formData.append('image', blob, 'custom-meme.png');\r\n\r\n            const uploadResponse = await fetch(\"https://api.memes.az-tenders.com/api/upload\", {\r\n                method: 'POST',\r\n                body: formData\r\n            });\r\n\r\n            if (!uploadResponse.ok) {\r\n                throw new Error('Erreur upload');\r\n            }\r\n\r\n            const uploadData = await uploadResponse.json();\r\n\r\n            // Étape 3: Sauvegarder en base de données\r\n            const memeData = {\r\n                title: title.trim(),\r\n                imageUrl: uploadData.imageUrl,\r\n                cloudinaryId: uploadData.cloudinaryId,\r\n            };\r\n\r\n            const saveResponse = await fetch('https://api.memes.az-tenders.com/api/memes', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(memeData)\r\n            });\r\n\r\n            if (!saveResponse.ok) {\r\n                throw new Error('Erreur sauvegarde');\r\n            }\r\n\r\n            alert('Meme sauvegardé avec succès!');\r\n\r\n            // Optionnel: fermer l'éditeur après sauvegarde\r\n            // onClose();\r\n\r\n        } catch (error) {\r\n            console.error('Erreur:', error);\r\n            alert('Erreur lors de la sauvegarde');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const selectedEl = elements.find(el => el.id === selectedElement);\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4\">\r\n            <div className=\"bg-white rounded-xl shadow-xl w-full max-w-5xl max-h-[70vh] mx-auto mb-0 sm:scale-[.85] flex flex-col md:flex-row \">\r\n\r\n                {/* Panneau de contrôle */}\r\n                <div className=\"bg-gray-50 p-3 sm:p-4 md:p-6 md:w-[40%] md:scale-[.95] scale-[.85]  overflow-y-auto border-b md:border-b-0 md:border-r border-gray-200\">\r\n\r\n                    <div className=\"flex items-center justify-between mb-6\">\r\n                        <h2 className=\"text-2xl font-bold text-gray-800\">Éditeur Canvas</h2>\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"text-gray-500 hover:text-gray-700 text-2xl\"\r\n                        >\r\n                            ✕\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Outils d'ajout */}\r\n                    <div className=\"space-y-4 mb-8\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-700\">Ajouter des éléments</h3>\r\n\r\n                        {/* Ajouter du texte */}\r\n                        <div className=\"space-y-2\">\r\n                        <input\r\n                                type=\"text\"\r\n                                placeholder=\"Titre\"\r\n                                value={title}\r\n                                onChange={(e) => setTitle(e.target.value)}\r\n                                className=\"bg-white/20 border border-black/30 text-black px-4 py-2 rounded-lg placeholder-gray sm:col-span-2\"\r\n                            />\r\n\r\n                            <button\r\n                                onClick={() => setShowTextInput(!showTextInput)}\r\n                                className=\"w-full flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition\"\r\n                            >\r\n                                <Type size={20} />\r\n                                Ajouter du texte\r\n                            </button>\r\n\r\n                            {showTextInput && (\r\n                                <div className=\"space-y-2 p-4 bg-white text-black rounded-lg border\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={textInput}\r\n                                        onChange={(e) => setTextInput(e.target.value)}\r\n                                        placeholder=\"Votre texte...\"\r\n                                        className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                    />\r\n\r\n                                    <div className=\"grid grid-cols-2 gap-2\">\r\n                                        <div>\r\n                                            <label className=\"text-xs text-gray-600\">Taille</label>\r\n                                            <input\r\n                                                type=\"range\"\r\n                                                min=\"12\"\r\n                                                max=\"72\"\r\n                                                value={textStyle.fontSize}\r\n                                                onChange={(e) => setTextStyle(prev => ({ ...prev, fontSize: parseInt(e.target.value) }))}\r\n                                                className=\"w-full\"\r\n                                            />\r\n                                            <span className=\"text-xs\">{textStyle.fontSize}px</span>\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                            <label className=\"text-xs text-gray-600\">Couleur</label>\r\n                                            <input\r\n                                                type=\"color\"\r\n                                                value={textStyle.color}\r\n                                                onChange={(e) => setTextStyle(prev => ({ ...prev, color: e.target.value }))}\r\n                                                className=\"w-full h-8 rounded border\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <button\r\n                                        onClick={addText}\r\n                                        className=\"w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition\"\r\n                                    >\r\n                                        Ajouter\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Ajouter une image */}\r\n                        <button\r\n                            onClick={() => fileInputRef.current?.click()}\r\n                            className=\"w-full flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition\"\r\n                        >\r\n                            <ImageIcon size={20} />\r\n                            Ajouter une image\r\n                        </button>\r\n                        <input\r\n                            ref={fileInputRef}\r\n                            type=\"file\"\r\n                            accept=\"image/*\"\r\n                            onChange={handleImageUpload}\r\n                            className=\"hidden\"\r\n                        />\r\n                    </div>\r\n                    {/* Contrôles de l'élément sélectionné */}\r\n                    {selectedEl && (\r\n                        <div className=\"space-y-4 p-4 bg-white rounded-lg border\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-700\">Élément sélectionné</h3>\r\n\r\n                            {/* Position */}\r\n                            <div className=\"grid grid-cols-2 gap-2 text-black\">\r\n                                <div>\r\n                                    <label className=\"text-xs text-gray-600\">Position X</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={Math.round(selectedEl.x)}\r\n                                        onChange={(e) => setElements(prev => prev.map(el =>\r\n                                            el.id === selectedElement ? { ...el, x: parseInt(e.target.value) || 0 } : el\r\n                                        ))}\r\n                                        className=\"w-full px-2 py-1 text-sm border rounded\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"text-xs text-gray-600\">Position Y</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={Math.round(selectedEl.y)}\r\n                                        onChange={(e) => setElements(prev => prev.map(el =>\r\n                                            el.id === selectedElement ? { ...el, y: parseInt(e.target.value) || 0 } : el\r\n                                        ))}\r\n                                        className=\"w-full px-2 py-1 text-sm border rounded\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Taille */}\r\n                            <div className=\"grid grid-cols-2 gap-2 text-black\">\r\n                                <div>\r\n                                    <label className=\"text-xs text-gray-600\">Largeur</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={Math.round(selectedEl.width)}\r\n                                        onChange={(e) => resizeElement(selectedElement, parseInt(e.target.value) || 20, selectedEl.height)}\r\n                                        className=\"w-full px-2 py-1 text-sm border rounded\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"text-xs text-gray-600\">Hauteur</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={Math.round(selectedEl.height)}\r\n                                        onChange={(e) => resizeElement(selectedElement, selectedEl.width, parseInt(e.target.value) || 20)}\r\n                                        className=\"w-full px-2 py-1 text-sm border rounded\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Actions */}\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={() => rotateElement(selectedElement)}\r\n                                    className=\"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition text-sm\"\r\n                                >\r\n                                    <RotateCw size={16} />\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => duplicateElement(selectedElement)}\r\n                                    className=\"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition text-sm\"\r\n                                >\r\n                                    <Copy size={16} />\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => deleteElement(selectedElement)}\r\n                                    className=\"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition text-sm\"\r\n                                >\r\n                                    <Trash2 size={16} />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Liste des éléments */}\r\n                    {elements.length > 0 && (\r\n                        <div className=\"mt-6\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-700 mb-2\">Éléments ({elements.length})</h3>\r\n                            <div className=\"space-y-2 max-h-40 overflow-y-auto text-black\">\r\n                                {elements.map((element, index) => (\r\n                                    <div\r\n                                        key={element.id}\r\n                                        onClick={() => setSelectedElement(element.id)}\r\n                                        className={`p-2 rounded cursor-pointer border transition ${selectedElement === element.id\r\n                                            ? 'border-blue-500 bg-blue-50'\r\n                                            : 'border-gray-200 hover:bg-gray-50'\r\n                                            }`}\r\n                                    >\r\n                                        <div className=\"text-sm font-medium\">\r\n                                            {element.type === 'text' ? '📝' : '🖼️'}\r\n                                            {element.type === 'text'\r\n                                                ? ` \"${element.content.substring(0, 20)}${element.content.length > 20 ? '...' : ''}\"`\r\n                                                : ` Image ${index + 1}`\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Zone de canvas */}\r\n                <div className=\"p-3 sm:p-4 md:p-6 bg-gray-50 md:bg-gray-100 flex flex-col overflow-y-auto transition-colors duration-200 sm:h-md\">\r\n                    <div className=\"flex justify-between items-center mb-4\">\r\n                        <div className=\"text-sm text-gray-600\">\r\n                            Canvas: {canvasSize.width} × {canvasSize.height}px\r\n                        </div>\r\n                        <div className=\"flex gap-2\">\r\n                            <button\r\n                                onClick={handleSaveCanvas}\r\n                                disabled={isSaving || !title.trim()}\r\n                                className=\"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                            >\r\n                                {isSaving ? 'Sauvegarde...' : 'Sauvegarder'}\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={downloadCanvas}\r\n                                disabled={elements.length === 0}\r\n                                className=\"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                            >\r\n                                Télécharger\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={shareCanvas}\r\n                                disabled={elements.length === 0}\r\n                                className=\"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                            >\r\n                                Partager\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 flex items-center justify-center\">\r\n                        <div\r\n                            ref={canvasRef}\r\n                            className=\"relative bg-white shadow-lg border-2 border-gray-300\"\r\n                            style={{\r\n                                width: canvasSize.width,\r\n                                height: canvasSize.height,\r\n                                maxWidth: '100%',\r\n                                maxHeight: '100%'\r\n                            }}\r\n                            onClick={(e) => {\r\n                                if (e.target === canvasRef.current) {\r\n                                    setSelectedElement(null);\r\n                                }\r\n                            }}\r\n                        >\r\n                            {elements.map((element) => (\r\n                                <div\r\n                                    key={element.id}\r\n                                    className={`absolute cursor-move border-2 ${selectedElement === element.id\r\n                                        ? 'border-blue-500 border-dashed'\r\n                                        : 'border-transparent hover:border-gray-300'\r\n                                        }`}\r\n                                    style={{\r\n                                        left: element.x,\r\n                                        top: element.y,\r\n                                        width: element.width,\r\n                                        height: element.height,\r\n                                        transform: `rotate(${element.rotation}deg)`,\r\n                                        transformOrigin: 'center center'\r\n                                    }}\r\n                                    onMouseDown={(e) => handleMouseDown(e, element)}\r\n                                >\r\n                                    {element.type === 'text' ? (\r\n                                        <div\r\n                                            className=\"w-full h-full flex items-center justify-center text-center leading-tight overflow-hidden\"\r\n                                            style={{\r\n                                                fontSize: element.style.fontSize,\r\n                                                color: element.style.color,\r\n                                                fontWeight: element.style.fontWeight,\r\n                                                wordBreak: 'break-word'\r\n                                            }}\r\n                                        >\r\n                                            {element.content}\r\n                                        </div>\r\n                                    ) : (\r\n                                        <img\r\n                                            src={element.content}\r\n                                            alt=\"Element\"\r\n                                            className=\"w-full h-full object-cover\"\r\n                                            draggable={false}\r\n                                        />\r\n                                    )}\r\n\r\n                                    {/* Poignées de redimensionnement pour l'élément sélectionné */}\r\n                                    {selectedElement === element.id && (\r\n                                        <>\r\n                                            <div\r\n                                                className=\"absolute -right-1 -bottom-1 w-3 h-3 bg-blue-500 border border-white cursor-se-resize\"\r\n                                                onMouseDown={(e) => {\r\n                                                    e.stopPropagation();\r\n                                                    const startX = e.clientX;\r\n                                                    const startY = e.clientY;\r\n                                                    const startWidth = element.width;\r\n                                                    const startHeight = element.height;\r\n\r\n                                                    const handleResize = (e) => {\r\n                                                        const deltaX = e.clientX - startX;\r\n                                                        const deltaY = e.clientY - startY;\r\n                                                        resizeElement(element.id, startWidth + deltaX, startHeight + deltaY);\r\n                                                    };\r\n\r\n                                                    const handleMouseUp = () => {\r\n                                                        document.removeEventListener('mousemove', handleResize);\r\n                                                        document.removeEventListener('mouseup', handleMouseUp);\r\n                                                    };\r\n\r\n                                                    document.addEventListener('mousemove', handleResize);\r\n                                                    document.addEventListener('mouseup', handleMouseUp);\r\n                                                }}\r\n                                            />\r\n                                        </>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n\r\n                            {/* Grille */}\r\n                            <div className=\"absolute inset-0 pointer-events-none opacity-10\">\r\n                                <svg width=\"100%\" height=\"100%\">\r\n                                    <defs>\r\n                                        <pattern id=\"grid\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\">\r\n                                            <path d=\"M 20 0 L 0 0 0 20\" fill=\"none\" stroke=\"#000\" strokeWidth=\"1\" />\r\n                                        </pattern>\r\n                                    </defs>\r\n                                    <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\r\n                                </svg>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default InteractifGen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}